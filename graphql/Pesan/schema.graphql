

type Pesan {
    id: ID!
    pengirim: UserProfile @belongsTo
    penerima: UserProfile @belongsTo
    isi: String
    parent_id: Int
    tgl_pesan: DateTime
    jenis_id: ID
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
    jenis: JenisPesan @belongsTo
}

type JenisPesan {
    id: ID!
    nama: String
    created_at: DateTime
    updated_at: DateTime
    deleted_at: DateTime
}

input CreatePesanInput {
    pengirim_id: ID
    penerima_id: ID
    isi: String
    parent_id: Int
    tgl_pesan: DateTime
    jenis_id: ID
}

input UpdatePesanInput {
    pengirim_id: ID
    penerima_id: ID
    isi: String
    parent_id: Int
    tgl_pesan: DateTime
    jenis_id: ID
}

extend type Query {
    allPesan: [Pesan!]!
    @all(model: "App\\Models\\Pesan\\Pesan")

    pesan(id: ID! @eq): Pesan
    @find(model: "App\\Models\\Pesan\\Pesan")

    pesansByUserProfile(user_profile_id: ID!): [Pesan!]!
    @field(resolver: "App\\GraphQL\\Pesan\\Queries\\PesanQuery@pesansByUserProfile")

   

}

extend type Mutation {
    createPesan(input: CreatePesanInput! @spread): Pesan
    @create(model: "App\\Models\\Pesan\\Pesan")

    updatePesan(id: ID! @eq, input: UpdatePesanInput! @spread): Pesan
    @update(model: "App\\Models\\Pesan\\Pesan")

    deletePesan(id: ID! @eq): Pesan
    @delete(model: "App\\Models\\Pesan\\Pesan")

    restorePesan(id: ID!): Pesan
    @field(resolver: "App\\GraphQL\\Pesan\\Mutations\\PesanMutation@restore")

    forceDeletePesan(id: ID!): Pesan
    @field(resolver: "App\\GraphQL\\Pesan\\Mutations\\PesanMutation@forceDelete")
}

extend type Subscription {
    messageCreated(user_profile_id: ID!): Pesan
    @field(resolver: "App\\GraphQL\\Pesan\\Subscriptions\\PesanSubscription@messageCreated")
}
